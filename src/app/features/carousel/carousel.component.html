<div class="w-full mt-8 mb-10" *ngIf="isBrowser">
  <swiper-container
    #swiper
    slides-per-view="auto"
    space-between="20"
    loop="false"
    pagination="false"
    navigation="false"
    autoplay-delay="3000"
    (mouseenter)="stopAutoPlay()"
    (mouseleave)="startAutoplay()"
    class="w-full"
  >
    @for (testimonial of testimonials; track testimonial) {
    <swiper-slide class="p-5">
      <div class="p-7 bg-[#f1f5f9] rounded-lg shadow-lg mx-auto card">
        <div class="mb-4">
          <h3 class="text-lg font-semibold text-gray-800">
            {{ testimonial.name }}
          </h3>
          <p class="text-sm text-gray-500">{{ testimonial.position }}</p>
        </div>
        <p class="text-gray-700 mb-4 leading-relaxed">
          {{ testimonial.text }}
        </p>
        <!-- <div class="flex text-yellow-400">
          @for (star of [1, 2, 3, 4, 5]; track star) {
          <ng-container><i class="fas fa-star"></i></ng-container>
          }
        </div> -->
      </div>
    </swiper-slide>
    }
  </swiper-container>

  <ul class="flex justify-center mt-4">
    <li
      *ngFor="let testimonial of testimonials; let i = index"
      (click)="swiperInstance?.slideTo(i)"
      [ngClass]="{
        'bg-gray-800': currentIndex === i,
        'bg-gray-300': currentIndex !== i
      }"
      class="w-3 h-3 rounded-full mx-1 cursor-pointer transition duration-300 ease-in-out"
    ></li>
  </ul>
</div>
